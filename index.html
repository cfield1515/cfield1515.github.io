<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CPOMS - Safeguarding and Wellbeing Solution</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/css/bootstrap.min.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            padding-top: 20px;
        }
        .container {
            max-width: 800px;
            margin: auto;
        }
        h1 {
            text-align: center;
            margin-bottom: 30px;
        }
        #header {
            text-align: center;
            margin-bottom: 20px;
            display: none;
        }
        #header a {
            margin-right: 20px;
            text-decoration: none;
            font-size: 18px;
            color: #333;
        }
        #header a:hover {
            color: #0069d9;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>CPOMS - Safeguarding and Wellbeing Solution</h1>
        <div id="header">
            <a href="#" onclick="cpomsGui.showViewStudentsPage()">Student Info</a>
            <a href="#" onclick="cpomsGui.showAddStudentPage()">Create Student</a>
            <a href="#" onclick="cpomsGui.showLogIncidentPage()">Log Incident</a>
            <a href="#" onclick="cpomsGui.showViewIncidentsPage()">View Incidents</a>
        </div>
        <div id="loginPage">
            <div class="mb-3">
                <label for="username" class="form-label">Username:</label>
                <input type="text" class="form-control" id="username">
            </div>
            <div class="mb-3">
                <label for="password" class="form-label">Password:</label>
                <input type="password" class="form-control" id="password">
            </div>
            <button class="btn btn-primary" onclick="cpomsGui.validateLogin()">Login</button>
        </div>
        <div id="mainMenu" style="display: none;">
            <div id="addStudentPage" style="display: none;">
                <h2>Create Student</h2>
                <div class="mb-3">
                    <label for="studentName" class="form-label">Name:</label>
                    <input type="text" class="form-control" id="studentName">
                </div>
                <div class="mb-3">
                    <label for="studentDOB" class="form-label">Date of Birth:</label>
                    <input type="date" class="form-control" id="studentDOB">
                </div>
                <div class="mb-3">
                    <label for="studentYear" class="form-label">Year:</label>
                    <input type="text" class="form-control" id="studentYear">
                </div>
                <button class="btn btn-primary" onclick="cpomsGui.addStudent()">Add Student</button>
            </div>
            <div id="viewStudentsPage" style="display: none;">
                <h2>Student Info</h2>
                <table class="table">
                    <thead>
                        <tr>
                            <th scope="col">Name</th>
                            <th scope="col">Date of Birth</th>
                            <th scope="col">Year</th>
                            <th scope="col">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="studentsTableBody">
                        <!-- Student details will be displayed here -->
                    </tbody>
                </table>
            </div>
            <div id="logIncidentPage" style="display: none;">
                <h2>Log Incident</h2>
                <div class="mb-3">
                    <label for="incidentStudentId" class="form-label">Student ID:</label>
                    <input type="text" class="form-control" id="incidentStudentId">
                </div>
                <div class="mb-3">
                    <label for="otherStudents" class="form-label">Other Students Involved (comma-separated):</label>
                    <input type="text" class="form-control" id="otherStudents">
                </div>
                <div class="mb-3">
                    <label for="incidentReason" class="form-label">Reason:</label>
                    <input type="text" class="form-control" id="incidentReason">
                </div>
                <div class="mb-3">
                    <label for="incidentSeverity" class="form-label">Severity:</label>
                    <input type="text" class="form-control" id="incidentSeverity">
                </div>
                <button class="btn btn-primary" onclick="cpomsGui.logIncident()">Log Incident</button>
            </div>
            <div id="viewIncidentsPage" style="display: none;">
                <h2>View Incidents</h2>
                <table class="table">
                    <thead>
                        <tr>
                            <th scope="col">Student ID</th>
                            <th scope="col">Other Students</th>
                            <th scope="col">Reason</th>
                            <th scope="col">Severity</th>
                            <th scope="col">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="loggedIncidentsTableBody">
                        <!-- Logged incidents will be displayed here -->
                    </tbody>
                </table>
            </div>
        </div>
        <div id="adminMenu" style="display: none;">
            <h2>Admin Menu</h2>
            <button class="btn btn-danger" onclick="cpomsGui.logout()">Logout</button>
        </div>
    </div>

    <script>
        class CPOMS {
            constructor() {
                this.users = {'admin': 'password'};
                this.students = {};
                this.incidents = [];
                this.loggedIncidents = [];
            }

            // Methods for CPOMS functionality...
        }

        class CPOMSGUI {
            constructor() {
                this.cpoms = new CPOMS();
            }

            validateLogin() {
                const username = document.getElementById('username').value;
                const password = document.getElementById('password').value;
                if (this.cpoms.users[username] && this.cpoms.users[username] === password) {
                    if (username === 'admin') {
                        const adminPassword = prompt('Enter admin password:');
                        if (adminPassword === 'adminpass') {
                            this.showAdminMenu();
                        } else {
                            alert('Invalid admin password');
                        }
                    } else {
                        this.showMainMenu();
                    }
                } else {
                    alert('Invalid username or password');
                }
            }

            showMainMenu() {
                document.getElementById('loginPage').style.display = 'none';
                document.getElementById('mainMenu').style.display = 'block';
                this.showHeader();
                this.showViewStudentsPage();
            }

            showAdminMenu() {
                document.getElementById('loginPage').style.display = 'none';
                document.getElementById('adminMenu').style.display = 'block';
                this.showHeader();
            }

            showHeader() {
                document.getElementById('header').style.display = 'block';
            }

            showViewStudentsPage() {
                document.getElementById('viewStudentsPage').style.display = 'block';
                document.getElementById('addStudentPage').style.display = 'none';
                document.getElementById('logIncidentPage').style.display = 'none';
                document.getElementById('viewIncidentsPage').style.display = 'none';
                this.populateStudentsTable();
            }

            showAddStudentPage() {
                document.getElementById('addStudentPage').style.display = 'block';
                document.getElementById('viewStudentsPage').style.display = 'none';
                document.getElementById('logIncidentPage').style.display = 'none';
                document.getElementById('viewIncidentsPage').style.display = 'none';
            }

            showLogIncidentPage() {
                document.getElementById('logIncidentPage').style.display = 'block';
                document.getElementById('viewStudentsPage').style.display = 'none';
                document.getElementById('addStudentPage').style.display = 'none';
                document.getElementById('viewIncidentsPage').style.display = 'none';
            }

            showViewIncidentsPage() {
                document.getElementById('viewIncidentsPage').style.display = 'block';
                document.getElementById('viewStudentsPage').style.display = 'none';
                document.getElementById('addStudentPage').style.display = 'none';
                document.getElementById('logIncidentPage').style.display = 'none';
                this.populateLoggedIncidentsTable();
            }

            populateStudentsTable() {
                const studentsTableBody = document.getElementById('studentsTableBody');
                studentsTableBody.innerHTML = '';
                for (const [studentId, studentInfo] of Object.entries(this.cpoms.students)) {
                    const row = `
                        <tr>
                            <td>${studentInfo.name}</td>
                            <td>${studentInfo.dob}</td>
                            <td>${studentInfo.year}</td>
                            <td><button onclick="cpomsGui.viewIncidents(${studentId})">View Incidents</button></td>
                        </tr>
                    `;
                    studentsTableBody.innerHTML += row;
                }
            }

            viewIncidents(studentId) {
                const incidents = this.cpoms.getStudentIncidents(studentId);
                let formatted = '';
                for (const incident of incidents) {
                    const studentName = this.cpoms.students[incident.studentId].name;
                    formatted += `Student Name: ${studentName}\nReason: ${incident.reason}\nSeverity: ${incident.severity}\n\n`;
                }
                alert(formatted);
            }

            addStudent() {
                const name = document.getElementById('studentName').value;
                const dob = document.getElementById('studentDOB').value;
                const year = document.getElementById('studentYear').value;
                this.cpoms.addStudent(name, dob, year);
                this.showViewStudentsPage();
            }

            logIncident() {
                const studentId = document.getElementById('incidentStudentId').value;
                const otherStudents = document.getElementById('otherStudents').value.split(',');
                const reason = document.getElementById('incidentReason').value;
                const severity = document.getElementById('incidentSeverity').value;
                this.cpoms.reportIncident(studentId, otherStudents, reason, severity);
                this.populateLoggedIncidentsTable();
            }

            populateLoggedIncidentsTable() {
                const loggedIncidentsTableBody = document.getElementById('loggedIncidentsTableBody');
                loggedIncidentsTableBody.innerHTML = '';
                for (const incident of this.cpoms.loggedIncidents) {
                    const row = `
                        <tr>
                            <td>${incident.studentId}</td>
                            <td>${incident.otherStudents.join(',')}</td>
                            <td>${incident.reason}</td>
                            <td>${incident.severity}</td>
                            <td><button onclick="cpomsGui.resolveIncident(${incident.id})">Resolve</button></td>
                            <td><button onclick="cpomsGui.editIncident(${incident.id})">Edit</button></td>
                        </tr>
                    `;
                    loggedIncidentsTableBody.innerHTML += row;
                }
            }

            resolveIncident(incidentId) {
                // Implement resolve incident functionality here
            }

            editIncident(incidentId) {
                // Implement edit incident functionality here
            }

            logout() {
                document.getElementById('loginPage').style.display = 'block';
                document.getElementById('mainMenu').style.display = 'none';
                document.getElementById('adminMenu').style.display = 'none';
                document.getElementById('header').style.display = 'none';
            }
        }

        const cpomsGui = new CPOMSGUI();
    </script>
</body>
</html>
